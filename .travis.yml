matrix:
  include:
  - language: java
    jdk: oraclejdk8
    
    before_script:
    - cd se.qxx.jukebox
    
  - language: android
    sudo: true
    
    before_install:
    - chmod +x ./se.qxx.android.jukebox/gradlew
    - chmod +x ci/decrypt_files.sh
    - chmod +x install-protobuf.sh
    - "./install-protobuf.sh"
    - "./ci/decrypt_files.sh"
      
    before_cache:
    - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
    - rm -fr $HOME/.gradle/caches/*/plugin-resolution/
    - rm -f  $HOME/.gradle/caches/3.3/classAnalysis/classAnalysis.lock
    - rm -f  $HOME/.gradle/caches/3.3/jarSnapshots/jarSnapshots.*
    
    cache:
      directories:
      - "$HOME/.m2"
      - "$TRAVIS_BUILD_DIR/protobuf-2.4.1"
      - "$HOME/.gradle/caches/"
      - "$HOME/.gradle/wrapper/"
      
    before_script:
    - cd se.qxx.android.jukebox
    
    android:
      components:
      - tools
      - tools
      - platform-tools
      - build-tools-25.0.0
      - android-23
      - addon_google_apis-google-23
      - extra-android-m2repository
      licenses:
      - android.sdk-license-.+

env:
  global:
  - RELEASE_STORE_FILE=${TRAVIS_BUILD_DIR}/ci/keystore
  - RELEASE_KEY_ALIAS=android-signing      
  - secure: meX6bjHhNkTd0F0k13IHB9RkMC29bMqx0YJdapJe2hDXNgA1LIC964zHl6xkYmFHmuenuBSPfsWy2gJr3NsehJs6eMxzFNRHorx2w7lsMoBt6NSQZA5MX68zMCEyff3Z4ja2jXFI0hLYIVlGS7C/TQffTc5bWey9+ydEi9F+ixGTgfxEBVmiJXErAEjECMUOFZE0m/uR178HvHm+S4CJPC46jVd68Ix38eHS17jw+2/WEG9NOrFtqfuYfIxyuF1ju9zGLCWd+MsDt/rT5QMBHkcLNY1Wu8GkGIYv4aCvMIh2jRxrBDjDTQpyQWtkv0IKQRN8ne4CGyvi91Mezwr7wv7BSOXjh+pz+O22udX4wfDbvCFhq+GM7cbEfQ8zGtcwYvo+UX+tQf/zUBok0caE9KnuGeDN9ggvQ//JWJ0QTu+sbAVStEzW0eAY/3cxvQp1wtKkeUNMouYgTG1YB3YRDLLZ9dx3lSEmo6Ozaw5sqsNPy4I+VCEMXYfhceNArx1tFvxGlcuhmk3DKycxSOt56tL1KeIvcrUF8cY5X8M/qjnom0KgPhzFZVnMfW/NUQH8ciRykp7zkPHSxecWwTIzRMi7BkZb9KIrrymG77TbkskiGBhAvqJWBsTG1CF5bB2qaO55BKf2JV8Jua00jNRf+yIEG6oBatBBxBoDumzGemA=
  - secure: JDFxF25hwyhg0b71E1qmwtwfF0am1Lge9ZW74xiEHyoXrt3thYhU+oesEQB1aPx2AHm3mcx+MqvWmonotzvULSK80419XqlMVigIPrV0Gjfx9Q0Tav6xLx+MB4n0h5LODPxjxRe0iKMwEWixSHobIIokDVh7YOR4ffqRiqdyRMQ+jAQTsq9TsC74UYuiSjR3v2cA5aNZiJ4NfPq/HAP/yAF26NpGXHnUkremvyuhJdQTV6rHtUwJOAVgqu4OcK4zwKEOlrmRcmWqsedGIfSnqEwnt1LGDTqTWoGpBKcJLXWwTGlzmoTNH5ZJv1+fMhJqTACJga7gOctBSInyQXoVMBRtfgRj9R9XblwpTeJUJdR6glXQkK6M0DPfqOTrDJxaBnpoXMnse0pn9HPZK4yHqS1JNPekN93E8yT3ABsd95Xg+6AEseirbWVzljPXGqHiZ5k1jKpEAc4fzmDf2oDhakFTVsSi/jIy7KFPIju+l3ZFWtrvYbp2gzQ8zP9nbc4+Abt+sI4R677CVdb4hntUah3YbBy8S7O1Zw14fjO3ekspSQ/0crR9TDCI/grSC6Uz3G9RgNZOcAP9HRqnnY2RUf/XNssh+Od/vPE25y6oMq1tA3P7LMxKiZCybBD8TBxUFmuIogTlspsuH/JcCFe8yL59q3LyyQje1buBcSZh0EI=
  - secure: HojpuIUuN08cnb0vw2xz5uLp+loYoYC0+o5wyYAZo2Hb69aKJnwvkYXlCbcSklfMW7AT/GBUy4XNJiEPZnwafhDtANVE459kqOZ/rzuG23lAVIN3mbyY84k371sen/69h32GmWR8Ecf1T77rKhgKmX6LfHdmyxzIyJ6RYbn17QShgL8AwBoV384T9gD+lsazzsn+HOKRaDjEXaYYIAmVLfwTc5ckoIKb+lf03AzOOFo0r5Js3aENWWV72oMrpn9bV8a8Or7A/It8otWHvfWHg/TBstgr4xQxw/DM5M3+nKt2+K1eM/5zMoMNknr4i3AdAB7H39Xwv83DRws4VFxo8gTwc1PMw8YhOxRJ5C+QXr1BLbSJ5DAaDmUtqugu+SAlLal2ckszAoNU5x/ZGemhs3QfQkuFzcUTjcdF+4YhC5NQsiYIpdPHcEa4x2QPwuHKnR2GxoqajKh9VZ/ZS4mducndYstPLTQa0ARKWtth9jTJd1NRGzHz/J9lpAjJKt7LE0SoNymHpcqFSZ1Kr8rW6VMIo0/llEJu0BM9cSRLUTXjQ/hh4OhDO1S6GahJCv2lhQtMTa7EHavfQARgyMSlCXHNwS/egfKRScfwNiF5WMGy0rbWQUOtxLDt+k6/+dLFT3ojIxS75L+xWgmrsa3fzJDnx11Mp8IrtoyeYu0aE3c=
      